[["index.html", "Minería de datos Aplicaciones en R con bases de datos de Bolivia Prefacio Audiencia Estructura del libro Software y acuerdos Datos Agradecimiento", " Minería de datos Aplicaciones en R con bases de datos de Bolivia MSc. Alvaro Limber Chirino Gutierrez 2022-08-29 Prefacio Este documento de Alvaro Chirino esta bajo la licencia de Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. Audiencia El libro fue diseñado originalmente para estudiantes de la carrera de Estadística de la Universidad Mayor de San Andrés. Este documento representa un primer acercamiento a los estudiantes de estadística al software R y al mundo de la minería de datos. Estructura del libro El libro incluye los siguientes capítulos: Introducción a la minería de datos Pre procesamiento Software y acuerdos sessionInfo() ## R version 4.2.1 (2022-06-23) ## Platform: x86_64-pc-linux-gnu (64-bit) ## Running under: Ubuntu 20.04.4 LTS ## ## Matrix products: default ## BLAS: /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3 ## LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3 ## ## locale: ## [1] LC_CTYPE=C.UTF-8 ## [2] LC_NUMERIC=C ## [3] LC_TIME=C.UTF-8 ## [4] LC_COLLATE=C.UTF-8 ## [5] LC_MONETARY=C.UTF-8 ## [6] LC_MESSAGES=C.UTF-8 ## [7] LC_PAPER=C.UTF-8 ## [8] LC_NAME=C ## [9] LC_ADDRESS=C ## [10] LC_TELEPHONE=C ## [11] LC_MEASUREMENT=C.UTF-8 ## [12] LC_IDENTIFICATION=C ## ## attached base packages: ## [1] stats graphics grDevices ## [4] utils datasets methods ## [7] base ## ## other attached packages: ## [1] GGally_2.1.2 Hmisc_4.7-1 ## [3] ggplot2_3.3.6 Formula_1.2-4 ## [5] survival_3.3-1 lattice_0.20-45 ## [7] mice_3.14.0 dplyr_1.0.9 ## [9] rvest_1.0.2 stringi_1.7.8 ## [11] tm_0.7-8 NLP_0.2-1 ## [13] lubridate_1.8.0 tidyr_1.2.0 ## ## loaded via a namespace (and not attached): ## [1] httr_1.4.3 ## [2] sass_0.4.2 ## [3] jsonlite_1.8.0 ## [4] splines_4.2.1 ## [5] bslib_0.4.0 ## [6] highr_0.9 ## [7] latticeExtra_0.6-30 ## [8] yaml_2.3.5 ## [9] slam_0.1-50 ## [10] pillar_1.8.0 ## [11] backports_1.4.1 ## [12] glue_1.6.2 ## [13] digest_0.6.29 ## [14] RColorBrewer_1.1-3 ## [15] checkmate_2.1.0 ## [16] colorspace_2.0-3 ## [17] htmltools_0.5.3 ## [18] Matrix_1.4-1 ## [19] plyr_1.8.7 ## [20] pkgconfig_2.0.3 ## [21] broom_1.0.0 ## [22] bookdown_0.28 ## [23] purrr_0.3.4 ## [24] scales_1.2.0 ## [25] jpeg_0.1-9 ## [26] htmlTable_2.4.1 ## [27] tibble_3.1.8 ## [28] generics_0.1.3 ## [29] cachem_1.0.6 ## [30] withr_2.5.0 ## [31] nnet_7.3-17 ## [32] cli_3.3.0 ## [33] magrittr_2.0.3 ## [34] deldir_1.0-6 ## [35] evaluate_0.16 ## [36] fansi_1.0.3 ## [37] xml2_1.3.3 ## [38] foreign_0.8-82 ## [39] tools_4.2.1 ## [40] data.table_1.14.2 ## [41] lifecycle_1.0.1 ## [42] stringr_1.4.0 ## [43] interp_1.1-3 ## [44] munsell_0.5.0 ## [45] cluster_2.1.3 ## [46] compiler_4.2.1 ## [47] jquerylib_0.1.4 ## [48] rlang_1.0.4 ## [49] grid_4.2.1 ## [50] rstudioapi_0.13 ## [51] htmlwidgets_1.5.4 ## [52] base64enc_0.1-3 ## [53] rmarkdown_2.14 ## [54] gtable_0.3.0 ## [55] reshape_0.8.9 ## [56] R6_2.5.1 ## [57] gridExtra_2.3 ## [58] knitr_1.39 ## [59] fastmap_1.1.0 ## [60] utf8_1.2.2 ## [61] parallel_4.2.1 ## [62] Rcpp_1.0.9 ## [63] vctrs_0.4.1 ## [64] rpart_4.1.16 ## [65] png_0.1-7 ## [66] tidyselect_1.1.2 ## [67] xfun_0.32 Datos Agradecimiento Peeta… "],["acerca-del-autor.html", "Acerca del autor Bibliografía", " Acerca del autor Bibliografía "],["minería-de-datos.html", "1 Minería de Datos 1.1 Motivación para la Minería de datos 1.2 ¿Qué es la minería de datos? 1.3 Datos y conocimiento (Insumo/Resultado) 1.4 Requerimientos 1.5 knowledge discovery in databases (KDD) 1.6 Preparación de los datos", " 1 Minería de Datos 1.1 Motivación para la Minería de datos (Variedad) Los métodos de recolección de datos han evolucionado muy rápidamente. (Volumen) Las bases de datos han crecido exponencialmente (Usuarios) Estos datos contienen información útil para las empresas, países, etc. (Tecnología) El tamaño hace que la inspección manual sea casi imposible (Método) Se requieren métodos de análisis de datos automáticos para optimizar el uso de estos enormes conjuntos de datos 1.2 ¿Qué es la minería de datos? Es el análisis de conjuntos de datos (a menudo grandes) para encontrar relaciones insospechadas (conocimiento) y resumir los datos de formas novedosas que sean comprensibles y útiles para el propietario/usuario de los datos. Principles of Data Mining (Hand et.al. 2001) 1.3 Datos y conocimiento (Insumo/Resultado) 1.3.1 Datos: se refieren a instancias únicas y primitivas (single objetos, personas, eventos, puntos en el tiempo, etc.) describir propiedades individuales a menudo son fáciles de recolectar u obtener (por ejemplo, cajeros de escáner, internet, etc.) no nos permiten hacer predicciones o pronósticos Ejercicio: Elija un sector/área y describa los potenciales datos que se tienen disponibles Salud (Hospital): Registros de pacientes, medicamentos, vacunas, fichas epidemiológicas, personal médico, consultorios (infraestructura), financiera (Seguridad) Feminicidios: Casos, lugar, entorno familiar, denuncias previas, sospechosos, información forense, Caracterizar al culpable Banca: Prestamos; ingresos, laboral. Caja de ahorro; personal, movimientos. Cajas; Servicios, etc. Cajeros; Lugar, movimientos. Clientes; Prestamistas; Deuda, mora, juicio, ahorristas. Base de datos de patrimonio Geografía: Clima; Lluvia, Minas; tipo, trabajadores, cultivos; tipo, temporada, tipo suelo, montañas, pluvial, temperatura. 1.3.2 Conocimiento: (Características) se refiere a clases de instancias (conjuntos de …) (Forma) describe patrones generales, estructuras, leyes, (Declaración) consta de la menor cantidad de declaraciones posibles (Proceso) a menudo es difícil y lleva mucho tiempo encontrar u obtener (Acciones) nos permite hacer predicciones y pronósticos Ejercicio: Agrupar la tipología de los pacientes; Mejorar servicio, acciones Determinantes del feminicidio; SLIM, medidas Relación el monto del ingreso con el motivo de préstamo; Realizar ofertas, promocionar a clientes. Relación entre el clima y los cultivos, dado el tipo de mineral se puede pensar en un mercado posterior 1.4 Requerimientos Disponibilidad para aprender Mucha paciencia Interactúa con otras áreas Preprocesamiento de datos Creatividad Rigor, prueba y error 1.5 knowledge discovery in databases (KDD) 1.6 Preparación de los datos 1.6.1 Recopilación Instituto de Estadística UDAPE, ASFI Ministerio Salud (SNIS), Ministerio de educación (SIE) APIs, Twitter, Facebook, etc. Kaggle Banco Mundial, UNICEF, FAO, BID (Open Data) 1.6.2 Data Warehouse 1.6.3 Data Warehouse in R "],["pre-procesamiento.html", "2 Pre procesamiento 2.1 Importación 2.2 Exploración 2.3 Relaciones entre 2 variables 2.4 Filtrado y selección 2.5 Muestreo, estimación, error estándar y confiabilidad 2.6 Transformación", " 2 Pre procesamiento Recopilación Importación Exploración Diccionario de variables Niveles de agregación Descripción univariada Identificando relaciones Aproximación Visual (Visualización) Filtrado y selección Filtrado de observaciones Selección de variables Pivot, Reshape Uniendo bases de datos Muestreo, estimación, error estándar y confiabilidad Diseño muestral Estimación Rendimiento Transformación Adecuación de formatos Limpieza de texto Creación de variables Valores atípicos Valores perdidos 2.1 Importación #bookdown::clean_book(TRUE) #bookdown::render_book(&quot;index.Rmd&quot;, &quot;bookdown::gitbook&quot;) rm(list=ls()) load(url(&quot;https://github.com/AlvaroLimber/EST-383/raw/master/data/oct20.RData&quot;)) 2.2 Exploración Filas/observaciones: Mesas electorales Hay información a nivel de mesas según el tipo de elección. La cobertura espacial: No solo es Bolivia 2.2.1 Diccionario de variables dim(computo) ## [1] 68132 26 nrow(computo) ## [1] 68132 ncol(computo) ## [1] 26 names(computo) ## [1] &quot;País&quot; ## [2] &quot;Número departamento&quot; ## [3] &quot;Departamento&quot; ## [4] &quot;Provincia&quot; ## [5] &quot;Número municipio&quot; ## [6] &quot;Municipio&quot; ## [7] &quot;Circunscripción&quot; ## [8] &quot;Localidad&quot; ## [9] &quot;Recinto&quot; ## [10] &quot;Número Mesa&quot; ## [11] &quot;Código Mesa&quot; ## [12] &quot;Elección&quot; ## [13] &quot;Inscritos&quot; ## [14] &quot;CC&quot; ## [15] &quot;FPV&quot; ## [16] &quot;MTS&quot; ## [17] &quot;UCS&quot; ## [18] &quot;MAS - IPSP&quot; ## [19] &quot;21F&quot; ## [20] &quot;PDC&quot; ## [21] &quot;MNR&quot; ## [22] &quot;PAN-BOL&quot; ## [23] &quot;Votos Válidos&quot; ## [24] &quot;Blancos&quot; ## [25] &quot;Nulos&quot; ## [26] &quot;Estado acta&quot; str(computo) ## tibble [68,132 × 26] (S3: tbl_df/tbl/data.frame) ## $ País : chr [1:68132] &quot;Argentina&quot; &quot;Argentina&quot; &quot;Argentina&quot; &quot;Argentina&quot; ... ## $ Número departamento: num [1:68132] 10 10 10 10 10 10 10 10 10 10 ... ## $ Departamento : chr [1:68132] &quot;Buenos Aires&quot; &quot;Buenos Aires&quot; &quot;Buenos Aires&quot; &quot;Buenos Aires&quot; ... ## $ Provincia : chr [1:68132] &quot;Quilmes&quot; &quot;Quilmes&quot; &quot;Quilmes&quot; &quot;Quilmes&quot; ... ## $ Número municipio : num [1:68132] 1 1 1 1 1 1 1 1 1 1 ... ## $ Municipio : chr [1:68132] &quot;Quilmes&quot; &quot;Quilmes&quot; &quot;Quilmes&quot; &quot;Quilmes&quot; ... ## $ Circunscripción : chr [1:68132] NA NA NA NA ... ## $ Localidad : chr [1:68132] &quot;Ezpeleta&quot; &quot;Ezpeleta&quot; &quot;Ezpeleta&quot; &quot;Ezpeleta&quot; ... ## $ Recinto : chr [1:68132] &quot;Esc Primaria Nro 52 Gral. Bartolome Mitre.&quot; &quot;Esc Primaria Nro 52 Gral. Bartolome Mitre.&quot; &quot;Esc Primaria Nro 52 Gral. Bartolome Mitre.&quot; &quot;Esc Primaria Nro 52 Gral. Bartolome Mitre.&quot; ... ## $ Número Mesa : num [1:68132] 1455 1456 1457 1458 1459 ... ## $ Código Mesa : chr [1:68132] &quot;110111041392518605&quot; &quot;110111041392518606&quot; &quot;110111041392518607&quot; &quot;110111041392518608&quot; ... ## $ Elección : chr [1:68132] &quot;Presidente y Vicepresidente&quot; &quot;Presidente y Vicepresidente&quot; &quot;Presidente y Vicepresidente&quot; &quot;Presidente y Vicepresidente&quot; ... ## $ Inscritos : num [1:68132] 237 237 235 239 238 239 238 237 63 239 ... ## $ CC : num [1:68132] 2 6 5 8 7 8 7 1 5 3 ... ## $ FPV : num [1:68132] 0 1 0 1 1 0 2 0 0 0 ... ## $ MTS : num [1:68132] 0 1 0 1 0 0 0 0 1 0 ... ## $ UCS : num [1:68132] 0 0 1 1 0 0 1 0 0 2 ... ## $ MAS - IPSP : num [1:68132] 118 110 120 124 122 122 121 106 33 114 ... ## $ 21F : num [1:68132] 0 0 2 0 0 0 1 1 0 3 ... ## $ PDC : num [1:68132] 3 5 3 2 6 2 4 3 0 6 ... ## $ MNR : num [1:68132] 1 1 0 0 0 0 1 0 0 0 ... ## $ PAN-BOL : num [1:68132] 2 1 0 2 0 1 1 0 1 1 ... ## $ Votos Válidos : num [1:68132] 126 125 131 139 136 133 138 111 40 129 ... ## $ Blancos : num [1:68132] 1 1 1 2 1 0 1 1 0 4 ... ## $ Nulos : num [1:68132] 1 6 5 2 2 5 4 9 0 1 ... ## $ Estado acta : chr [1:68132] &quot;Computada&quot; &quot;Computada&quot; &quot;Computada&quot; &quot;Computada&quot; ... str(computo$País) ## chr [1:68132] &quot;Argentina&quot; ... typeof(computo$País) ## [1] &quot;character&quot; 2.2.2 Agregación/Niveles aux&lt;-unique(computo$Elección) length(unique(computo$`Código Mesa`)) ## [1] 34551 library(dplyr) #filtrado ctr+alt*M bdpv&lt;-computo %&gt;% filter(Elección==aux[1]) bddu&lt;-computo %&gt;% filter(Elección==aux[2]) bdde&lt;-computo %&gt;% filter(Elección==aux[3]) save(bdpv,bddu,bdde,file=&quot;bd_elecciones20.RData&quot;) 2.2.3 Descripción univariada Tablas de frecuencia (cualitativas) Reportes estadísticos; media, sd, etc. (Cuantitativas) Gráficos (mix) # Ejercicio: Crear un vector que haga la diferencia entre variables cualitativas y cuantitativas. dcuanti&lt;-function(bd){ bd&lt;-data.frame(bd) aux&lt;-NULL for(i in 1:ncol(bd)){ aux[i]&lt;-is.numeric(bd[,i]) } return(aux) } dcuanti(bdpv) ## [1] FALSE TRUE FALSE FALSE TRUE ## [6] FALSE FALSE FALSE FALSE TRUE ## [11] FALSE FALSE TRUE TRUE TRUE ## [16] TRUE TRUE TRUE TRUE TRUE ## [21] TRUE TRUE TRUE TRUE TRUE ## [26] FALSE #typeof(bdpv) #str(bdpv) #bdpv&lt;-data.frame(bdpv) #is.numeric(bdpv[,&quot;MNR&quot;]) #is.numeric(bdpv[,21]) #is.numeric(bdpv$MNR) vcuanti&lt;-names(bdpv)[dcuanti(bdpv)] vcuali&lt;-names(bdpv)[!dcuanti(bdpv)] library(Hmisc) describe(bdpv[,vcuanti]) ## bdpv[, vcuanti] ## ## 16 Variables 34551 Observations ## -------------------------------------- ## Número departamento ## n missing distinct Info ## 34551 0 86 0.96 ## Mean Gmd .05 .10 ## 5.033 3.798 1 2 ## .25 .50 .75 .90 ## 2 4 7 7 ## .95 ## 9 ## ## lowest : 1 2 3 4 5, highest: 92 93 94 95 96 ## -------------------------------------- ## Número municipio ## n missing distinct Info ## 34551 0 8 0.698 ## Mean Gmd ## 1.888 1.352 ## ## lowest : 1 2 3 4 5, highest: 4 5 6 7 8 ## ## Value 1 2 3 4 ## Frequency 23108 3274 2259 1391 ## Proportion 0.669 0.095 0.065 0.040 ## ## Value 5 6 7 8 ## Frequency 4024 384 73 38 ## Proportion 0.116 0.011 0.002 0.001 ## -------------------------------------- ## Número Mesa ## n missing distinct Info ## 34551 0 34551 1 ## Mean Gmd .05 .10 ## 44067 27264 10222 20121 ## .25 .50 .75 .90 ## 25304 34953 71670 76853 ## .95 ## 78580 ## ## lowest : 1001 1002 1003 1004 1005 ## highest: 90385 90386 90387 90388 90389 ## -------------------------------------- ## Inscritos ## n missing distinct Info ## 34551 0 253 0.999 ## Mean Gmd .05 .10 ## 211.7 33.36 89 160 ## .25 .50 .75 .90 ## 220 226 231 235 ## .95 ## 238 ## ## lowest : 5 6 7 9 10 ## highest: 254 255 256 257 258 ## -------------------------------------- ## CC ## n missing distinct Info ## 34551 0 185 1 ## Mean Gmd .05 .10 ## 64.86 51.77 3 7 ## .25 .50 .75 .90 ## 25 61 100 131 ## .95 ## 144 ## ## lowest : 0 1 2 3 4 ## highest: 180 181 185 189 193 ## -------------------------------------- ## FPV ## n missing distinct Info ## 34551 0 14 0.801 ## Mean Gmd .05 .10 ## 0.6866 0.9302 0 0 ## .25 .50 .75 .90 ## 0 0 1 2 ## .95 ## 3 ## ## lowest : 0 1 2 3 4, highest: 9 10 11 12 16 ## ## 0 (19338, 0.560), 1 (9814, 0.284), 2 ## (3563, 0.103), 3 (1170, 0.034), 4 ## (409, 0.012), 5 (109, 0.003), 6 (65, ## 0.002), 7 (30, 0.001), 8 (20, 0.001), ## 9 (16, 0.000), 10 (8, 0.000), 11 (3, ## 0.000), 12 (5, 0.000), 16 (1, 0.000) ## -------------------------------------- ## MTS ## n missing distinct Info ## 34551 0 52 0.923 ## Mean Gmd .05 .10 ## 2.223 3.106 0 0 ## .25 .50 .75 .90 ## 0 1 3 6 ## .95 ## 9 ## ## lowest : 0 1 2 3 4, highest: 48 50 54 55 58 ## -------------------------------------- ## UCS ## n missing distinct Info ## 34551 0 16 0.825 ## Mean Gmd .05 .10 ## 0.7316 0.948 0 0 ## .25 .50 .75 .90 ## 0 0 1 2 ## .95 ## 3 ## ## lowest : 0 1 2 3 4 ## highest: 13 17 105 132 136 ## ## 0 (18100, 0.524), 1 (10674, 0.309), 2 ## (3982, 0.115), 3 (1243, 0.036), 4 ## (355, 0.010), 5 (121, 0.004), 6 (40, ## 0.001), 7 (19, 0.001), 8 (4, 0.000), ## 9 (4, 0.000), 10 (3, 0.000), 13 (2, ## 0.000), 17 (1, 0.000), 105 (1, ## 0.000), 132 (1, 0.000), 136 (1, ## 0.000) ## -------------------------------------- ## MAS - IPSP ## n missing distinct Info ## 34551 0 232 1 ## Mean Gmd .05 .10 ## 83.62 49.34 20 28 ## .25 .50 .75 .90 ## 49 81 115 141 ## .95 ## 158 ## ## lowest : 0 1 2 3 4 ## highest: 227 229 232 233 253 ## -------------------------------------- ## 21F ## n missing distinct Info ## 34551 0 92 0.992 ## Mean Gmd .05 .10 ## 7.531 8.923 0 0 ## .25 .50 .75 .90 ## 2 4 10 20 ## .95 ## 27 ## ## lowest : 0 1 2 3 4 ## highest: 92 97 98 110 125 ## -------------------------------------- ## PDC ## n missing distinct Info ## 34551 0 72 0.999 ## Mean Gmd .05 .10 ## 15.6 11.47 2 4 ## .25 .50 .75 .90 ## 8 14 22 30 ## .95 ## 35 ## ## lowest : 0 1 2 3 4, highest: 70 71 75 87 92 ## -------------------------------------- ## MNR ## n missing distinct Info ## 34551 0 40 0.869 ## Mean Gmd .05 .10 ## 1.225 1.717 0 0 ## .25 .50 .75 .90 ## 0 1 2 3 ## .95 ## 5 ## ## lowest : 0 1 2 3 4, highest: 36 38 39 46 62 ## -------------------------------------- ## PAN-BOL ## n missing distinct Info ## 34551 0 19 0.901 ## Mean Gmd .05 .10 ## 1.153 1.388 0 0 ## .25 .50 .75 .90 ## 0 1 2 3 ## .95 ## 4 ## ## lowest : 0 1 2 3 4, highest: 14 15 16 17 29 ## ## 0 (14321, 0.414), 1 (9904, 0.287), 2 ## (5331, 0.154), 3 (2683, 0.078), 4 ## (1292, 0.037), 5 (565, 0.016), 6 ## (235, 0.007), 7 (119, 0.003), 8 (41, ## 0.001), 9 (26, 0.001), 10 (17, ## 0.000), 11 (5, 0.000), 12 (2, 0.000), ## 13 (3, 0.000), 14 (2, 0.000), 15 (1, ## 0.000), 16 (1, 0.000), 17 (2, 0.000), ## 29 (1, 0.000) ## -------------------------------------- ## Votos Válidos ## n missing distinct Info ## 34551 0 239 1 ## Mean Gmd .05 .10 ## 177.6 37.73 72 119 ## .25 .50 .75 .90 ## 176 192 201 207 ## .95 ## 212 ## ## lowest : 0 3 4 5 6 ## highest: 239 240 245 246 255 ## -------------------------------------- ## Blancos ## n missing distinct Info ## 34551 0 72 0.969 ## Mean Gmd .05 .10 ## 2.705 3.023 0 0 ## .25 .50 .75 .90 ## 1 2 4 6 ## .95 ## 8 ## ## lowest : 0 1 2 3 4 ## highest: 89 90 96 105 110 ## -------------------------------------- ## Nulos ## n missing distinct Info ## 34551 0 56 0.993 ## Mean Gmd .05 .10 ## 6.637 4.587 1 2 ## .25 .50 .75 .90 ## 4 6 9 12 ## .95 ## 14 ## ## lowest : 0 1 2 3 4, highest: 56 63 64 67 92 ## -------------------------------------- describe(bdpv[,vcuali]) ## bdpv[, vcuali] ## ## 10 Variables 34551 Observations ## -------------------------------------- ## País ## n missing distinct ## 34551 0 34 ## ## lowest : Alemania Argentina Austria Belgica Bolivia ## highest: Rusia Suecia Suiza Uruguay Venezuela ## -------------------------------------- ## Departamento ## n missing distinct ## 34551 0 84 ## ## lowest : Acre Andalucia Antofagasta Arica Atacama ## highest: Texas Tucumán Valencia Viena Virginia ## -------------------------------------- ## Provincia ## n missing distinct ## 34551 0 215 ## ## lowest : Abaroa Abel Iturralde Abuna Adolfo Alsina Alonso de Ibáñez ## highest: Washington D.C. Yacuma Yamparaez Yaví Zudañez ## -------------------------------------- ## Municipio ## n missing distinct ## 34551 0 441 ## ## lowest : Acasio Achacachi Achocalla Aiquile Alalay ## highest: Yocalla Yotala Yunchará Yunguyo del Litoral Zudañez ## -------------------------------------- ## Localidad ## n missing distinct ## 34551 0 3336 ## ## lowest : 1 de Mayo 10 de Noviembre (Núcleo 47) 11 de Septiembre 12 de Agosto 12 de Octubre ## highest: Zapatera Zapatera Norte Zapaterambia Zapoco Zudañez ## -------------------------------------- ## Recinto ## n missing distinct ## 34551 0 4812 ## ## lowest : (Cárcel) C.O.F. Miraflores (Cárcel) C.O.F. Obrajes (Cárcel) Cárcel De Mujeres (Cárcel) Cárcel Mocobi (Cárcel) Cárcel Pública ## highest: Urkupiña Urubo Open Mall Veterinaria Sub Sede UATF Virgen De Guadalupe Wakefield High School ## -------------------------------------- ## Código Mesa ## n missing distinct ## 34551 0 34551 ## ## lowest : 100320112000000101 100320112000000102 100320112000000103 100320112000000104 100320112000000105 ## highest: 112137738202612004 112137738202612005 112137738202612006 112334937922511701 112375037932511801 ## -------------------------------------- ## Elección ## n ## 34551 ## missing ## 0 ## distinct ## 1 ## value ## Presidente y Vicepresidente ## ## Value Presidente y Vicepresidente ## Frequency 34551 ## Proportion 1 ## -------------------------------------- ## Estado acta ## n missing distinct ## 34551 0 1 ## value ## Computada ## ## Value Computada ## Frequency 34551 ## Proportion 1 ## -------------------------------------- ## ## Variables with all observations missing: ## ## [1] Circunscripción #Tarea: Escribir una función que permita explorar las características de las variables, según su naturaleza #cualitativa t1&lt;-table(bdpv$Departamento) aux1&lt;-as.data.frame(prop.table(t1)*100)#% aux2&lt;-as.data.frame(t1)#frecuencias names(aux1)[2]&lt;-&quot;Porcentaje&quot; tt1&lt;-merge(aux1,aux2)#unir base de datos head(tt1) ## Var1 Porcentaje Freq ## 1 Acre 0.002894272 1 ## 2 Andalucia 0.063673989 22 ## 3 Antofagasta 0.196810512 68 ## 4 Arica 0.040519811 14 ## 5 Atacama 0.017365633 6 ## 6 Beijing 0.002894272 1 library(dplyr)#Gramática de datos bdpv %&gt;% group_by(Departamento) %&gt;% count() ## # A tibble: 84 × 2 ## # Groups: Departamento [84] ## Departamento n ## &lt;chr&gt; &lt;int&gt; ## 1 Acre 1 ## 2 Andalucia 22 ## 3 Antofagasta 68 ## 4 Arica 14 ## 5 Atacama 6 ## 6 Beijing 1 ## 7 Beni 1298 ## 8 Berlín 2 ## 9 Bruselas 1 ## 10 Buenos Aires 532 ## # … with 74 more rows ## # ℹ Use `print(n = ...)` to see more rows tt1&lt;-bdpv %&gt;% group_by(Departamento) %&gt;% summarise(Freq=n()) %&gt;% mutate(Porcentaje=(Freq/sum(Freq))*100) library(ggplot2)# gramàtica de gràficos ggplot(bdpv,aes(Departamento))+geom_bar() tt1 ## # A tibble: 84 × 3 ## Departamento Freq Porcentaje ## &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; ## 1 Acre 1 0.00289 ## 2 Andalucia 22 0.0637 ## 3 Antofagasta 68 0.197 ## 4 Arica 14 0.0405 ## 5 Atacama 6 0.0174 ## 6 Beijing 1 0.00289 ## 7 Beni 1298 3.76 ## 8 Berlín 2 0.00579 ## 9 Bruselas 1 0.00289 ## 10 Buenos Aires 532 1.54 ## # … with 74 more rows ## # ℹ Use `print(n = ...)` to see more rows ggplot(tt1[1:10,],aes(Departamento,Porcentaje))+geom_bar(stat=&quot;identity&quot;) ggplot(tt1 %&gt;% filter(Porcentaje&gt;1),aes(Departamento,Porcentaje))+geom_bar(stat=&quot;identity&quot;) #cuantitativas mean(bdpv$Blancos) ## [1] 2.705479 median(bdpv$Blancos) ## [1] 2 summary(bdpv$Blancos) ## Min. 1st Qu. Median Mean ## 0.000 1.000 2.000 2.705 ## 3rd Qu. Max. ## 4.000 110.000 sd(bdpv$Blancos) ## [1] 3.839097 sd(bdpv$Blancos)/mean(bdpv$Blancos) ## [1] 1.419008 quantile(bdpv$Blancos,seq(0,1,0.1)) ## 0% 10% 20% 30% 40% 50% 60% ## 0 0 0 1 1 2 2 ## 70% 80% 90% 100% ## 3 4 6 110 quantile(bdpv$Blancos,seq(0,1,0.05)) ## 0% 5% 10% 15% 20% 25% 30% ## 0 0 0 0 0 1 1 ## 35% 40% 45% 50% 55% 60% 65% ## 1 1 2 2 2 2 3 ## 70% 75% 80% 85% 90% 95% 100% ## 3 4 4 5 6 8 110 hist(bdpv$Blancos) plot(density(bdpv$Blancos)) boxplot(bdpv$Blancos) boxplot(log(bdpv$Blancos)) ## Warning in bplt(at[i], wid = ## width[i], stats = z$stats[, i], out = ## z$out[z$group == : Outlier (-Inf) in ## boxplot 1 is not drawn plot(density(log(bdpv$Blancos))) 2.3 Relaciones entre 2 variables Cuali vs cuali Cuanti vs cuanti Cuali vs cuanti rm(list=ls()) load(url(&quot;https://github.com/AlvaroLimber/EST-384/raw/master/data/eh19.RData&quot;)) #cuali vs cuali #eh19p$s02a_02#sexo #eh19p$p0#pobreza monetaria moderada t2&lt;-table(eh19p$s02a_02,eh19p$p0) t2 ## ## No pobre Pobre ## 1.Hombre 12218 7070 ## 2.Mujer 12520 7757 prop.table(t2) ## ## No pobre Pobre ## 1.Hombre 0.3088083 0.1786933 ## 2.Mujer 0.3164413 0.1960571 prop.table(t2,1) ## ## No pobre Pobre ## 1.Hombre 0.6334509 0.3665491 ## 2.Mujer 0.6174483 0.3825517 prop.table(t2,2) ## ## No pobre Pobre ## 1.Hombre 0.4938960 0.4768328 ## 2.Mujer 0.5061040 0.5231672 chisq.test(t2)# H0: Independencia ## ## Pearson&#39;s Chi-squared test with ## Yates&#39; continuity correction ## ## data: t2 ## X-squared = 10.735, df = 1, ## p-value = 0.001051 plot(eh19p$s02a_02,eh19p$p0) plot(eh19p$area,eh19p$p0) plot(eh19p$niv_ed,eh19p$p0) chisq.test(table(eh19p$niv_ed,eh19p$p0)) ## ## Pearson&#39;s Chi-squared test ## ## data: table(eh19p$niv_ed, eh19p$p0) ## X-squared = 2096.3, df = 6, ## p-value &lt; 2.2e-16 2.3.1 Cuanti vs Cuanti #eh19p$s02a_03#edad #eh19p$aestudio# años de educación #eh19p$ylab# ingreso laboral cor(eh19p[,c(&quot;s02a_03&quot;,&quot;aestudio&quot;,&quot;ylab&quot;)],use=&quot;complete.obs&quot;) ## s02a_03 aestudio ## s02a_03 1.00000000 -0.3287425 ## aestudio -0.32874252 1.0000000 ## ylab 0.01768749 0.3973245 ## ylab ## s02a_03 0.01768749 ## aestudio 0.39732445 ## ylab 1.00000000 cor(eh19p[,c(&quot;s02a_03&quot;,&quot;aestudio&quot;,&quot;ylab&quot;)],use=&quot;pairwise.complete.obs&quot;) ## s02a_03 aestudio ## s02a_03 1.00000000 0.1884556 ## aestudio 0.18845555 1.0000000 ## ylab 0.01811229 0.3973245 ## ylab ## s02a_03 0.01811229 ## aestudio 0.39732445 ## ylab 1.00000000 nrow(na.omit(eh19p[,c(&quot;s02a_03&quot;,&quot;aestudio&quot;,&quot;ylab&quot;)])) ## [1] 15765 nrow(na.omit(eh19p[,c(&quot;s02a_03&quot;,&quot;aestudio&quot;)])) ## [1] 36702 library(GGally) ggpairs(eh19p,columns = c(&quot;s02a_03&quot;,&quot;aestudio&quot;,&quot;ylab&quot;)) ## Warning in ggally_statistic(data ## = data, mapping = mapping, na.rm = ## na.rm, : Removed 2903 rows containing ## missing values ## Warning in ggally_statistic(data ## = data, mapping = mapping, na.rm = ## na.rm, : Removed 23816 rows containing ## missing values ## Warning: Removed 2903 rows containing ## missing values (geom_point). ## Warning: Removed 2903 rows containing ## non-finite values (stat_density). ## Warning in ggally_statistic(data ## = data, mapping = mapping, na.rm = ## na.rm, : Removed 23840 rows containing ## missing values ## Warning: Removed 23816 rows containing ## missing values (geom_point). ## Warning: Removed 23840 rows containing ## missing values (geom_point). ## Warning: Removed 23816 rows containing ## non-finite values (stat_density). ggpairs(eh19p,columns = c(&quot;s02a_02&quot;,&quot;aestudio&quot;,&quot;ylab&quot;,&quot;p0&quot;)) ## plot: [1,1] [--------] 6% est: 0s ## plot: [1,2] [&gt;-------] 12% est: 0s ## Warning: Removed 2903 rows containing ## non-finite values (stat_boxplot). ## plot: [1,3] [=&gt;------] 19% est: 1s ## Warning: Removed 23816 rows containing ## non-finite values (stat_boxplot). ## plot: [1,4] [=&gt;------] 25% est: 2s plot: [2,1] [=&gt;------] 31% est: 1s `stat_bin()` using `bins = 30`. ## Pick better value with `binwidth`. ## Warning: Removed 2903 rows containing ## non-finite values (stat_bin). ## plot: [2,2] [==&gt;-----] 38% est: 1s ## Warning: Removed 2903 rows containing ## non-finite values (stat_density). ## plot: [2,3] [===&gt;----] 44% est: 1s ## Warning in ggally_statistic(data ## = data, mapping = mapping, na.rm = ## na.rm, : Removed 23840 rows containing ## missing values ## plot: [2,4] [===&gt;----] 50% est: 1s ## Warning: Removed 2903 rows containing ## non-finite values (stat_boxplot). ## plot: [3,1] [===&gt;----] 56% est: 1s `stat_bin()` using `bins = 30`. ## Pick better value with `binwidth`. ## Warning: Removed 23816 rows containing ## non-finite values (stat_bin). ## plot: [3,2] [====&gt;---] 62% est: 1s ## Warning: Removed 23840 rows containing ## missing values (geom_point). ## plot: [3,3] [=====&gt;--] 69% est: 1s ## Warning: Removed 23816 rows containing ## non-finite values (stat_density). ## plot: [3,4] [=====&gt;--] 75% est: 0s ## Warning: Removed 23816 rows containing ## non-finite values (stat_boxplot). ## plot: [4,1] [=====&gt;--] 81% est: 0s plot: [4,2] [======&gt;-] 88% est: 0s `stat_bin()` using `bins = 30`. ## Pick better value with `binwidth`. ## Warning: Removed 2903 rows containing ## non-finite values (stat_bin). ## plot: [4,3] [=======&gt;] 94% est: 0s `stat_bin()` using `bins = 30`. ## Pick better value with `binwidth`. ## Warning: Removed 23816 rows containing ## non-finite values (stat_bin). ## plot: [4,4] [========]100% est: 0s 2.4 Filtrado y selección Es el proceso que reduce la base de datos a la población objetivo y especifíca las variables a utilizar en el modelado posterior. Además de incorporar otras variables provenientes de otras bases de datos si es necesario. Por ejemplo: Para los resultados electorales de 2020 presidente y vicepresidente: Se quiere estudiar el comportamiento de votos Nulos y Blancos para el departamento de Tarija Para la encuesta a hogares 2019, se quiere estudiar los años de educación, condición de pobreza moderada, edad e ingreso laboral de las jefas de hogar. 2.4.1 Selección/filtrado de observaciones (filas) El objetivo en este punto es trabajar sobre la unidad de análisis, que define a la población objetivo. Ejercicio: obtener la base de datos filtrada de los ejemplos anteriores. rm(list = ls()) library(dplyr) #electoral load(&quot;/cloud/project/DataMining/bd_elecciones20.RData&quot;) unique(bdpv$Departamento) ## [1] &quot;Buenos Aires&quot; ## [2] &quot;Mendoza&quot; ## [3] &quot;Jujuy&quot; ## [4] &quot;Santa Fe&quot; ## [5] &quot;Cordoba&quot; ## [6] &quot;Salta&quot; ## [7] &quot;Rio Negro&quot; ## [8] &quot;Chubut&quot; ## [9] &quot;Corrientes&quot; ## [10] &quot;La Rioja&quot; ## [11] &quot;Neuquén&quot; ## [12] &quot;San Juan&quot; ## [13] &quot;San Luis&quot; ## [14] &quot;Santa Cruz - Argentina&quot; ## [15] &quot;Tucumán&quot; ## [16] &quot;La Pampa&quot; ## [17] &quot;Viena&quot; ## [18] &quot;Bruselas&quot; ## [19] &quot;Chuquisaca&quot; ## [20] &quot;Berlín&quot; ## [21] &quot;Tarija&quot; ## [22] &quot;La Paz&quot; ## [23] &quot;Cochabamba&quot; ## [24] &quot;Oruro&quot; ## [25] &quot;Potosí&quot; ## [26] &quot;Santa Cruz&quot; ## [27] &quot;Beni&quot; ## [28] &quot;Pando&quot; ## [29] &quot;Lazio&quot; ## [30] &quot;Lombardía&quot; ## [31] &quot;Kanto&quot; ## [32] &quot;México D.F.&quot; ## [33] &quot;Managua&quot; ## [34] &quot;Panamá&quot; ## [35] &quot;Dist. Capital&quot; ## [36] &quot;Lima&quot; ## [37] &quot;Cusco&quot; ## [38] &quot;Puno&quot; ## [39] &quot;Tacna&quot; ## [40] &quot;Moquegua&quot; ## [41] &quot;Distr. Federal&quot; ## [42] &quot;Estocolmo&quot; ## [43] &quot;Ginebra&quot; ## [44] &quot;Montevideo&quot; ## [45] &quot;Antofagasta&quot; ## [46] &quot;Tarapaca&quot; ## [47] &quot;Atacama&quot; ## [48] &quot;Beijing&quot; ## [49] &quot;Cundinamarca&quot; ## [50] &quot;Seúl&quot; ## [51] &quot;San José&quot; ## [52] &quot;La Habana&quot; ## [53] &quot;Pichincha&quot; ## [54] &quot;Virginia&quot; ## [55] &quot;New York&quot; ## [56] &quot;Maryland&quot; ## [57] &quot;Dist. Columbia&quot; ## [58] &quot;California&quot; ## [59] &quot;Florida&quot; ## [60] &quot;Rodhe Island&quot; ## [61] &quot;New Jersey&quot; ## [62] &quot;Texas&quot; ## [63] &quot;El Cairo&quot; ## [64] &quot;Madrid&quot; ## [65] &quot;Cataluña&quot; ## [66] &quot;Valencia&quot; ## [67] &quot;Murcia&quot; ## [68] &quot;Euskadi&quot; ## [69] &quot;Andalucia&quot; ## [70] &quot;Islas Baleares&quot; ## [71] &quot;Ile de France&quot; ## [72] &quot;Holanda&quot; ## [73] &quot;Delhi&quot; ## [74] &quot;Inglaterra&quot; ## [75] &quot;Teherán&quot; ## [76] &quot;Sao Paulo&quot; ## [77] &quot;Río de janeiro&quot; ## [78] &quot;Mato Grosso&quot; ## [79] &quot;Rondonia&quot; ## [80] &quot;M.Grosso do Sul&quot; ## [81] &quot;Acre&quot; ## [82] &quot;Ontario&quot; ## [83] &quot;Metropolitana&quot; ## [84] &quot;Arica&quot; bdtj&lt;-bdpv %&gt;% filter(Departamento==&quot;Tarija&quot;) #eh 2019 load(url(&quot;https://github.com/AlvaroLimber/EST-384/raw/master/data/eh19.RData&quot;)) aux&lt;-unique(eh19p$s02a_02) aux[2] ## [1] 2.Mujer ## Levels: 1.Hombre 2.Mujer relacion&lt;-unique(eh19p$s02a_05) ehjm&lt;-eh19p %&gt;% filter(s02a_02==aux[2] &amp; s02a_05==relacion[1]) Ejercicio Obtener una base de datos de la EH19 que incluya solamente a los suegros, padres y otros parientes. relacion[c(4,8,10)] ## [1] 8.SUEGROS 7.PADRES ## [3] 10.OTRO PARIENTE ## 13 Levels: 1.JEFE O JEFA DEL HOGAR ... ehmis&lt;-eh19p %&gt;% filter(s02a_05 %in% relacion[c(4,8,10)]) Ejemplo, se quiere estudiar la bd electoral para presidente en todas las mesas, excepto las de Tarija. bdntj&lt;-bdpv %&gt;% filter(Departamento!=&quot;Tarija&quot;) 2.4.2 Selección de variables (columnas) El objetivo es trabajar únicamente con las variables necesarias para el estudio, es decir, las que se utilizaran en el modelado posterior. Ejemplo, realizar la selección de variables para los ejemplos anteriores: # Para los resultados electorales de 2020 presidente y vicepresidente: Se quiere estudiar el comportamiento de votos Nulos y Blancos para el departamento de Tarija names(bdpv) ## [1] &quot;País&quot; ## [2] &quot;Número departamento&quot; ## [3] &quot;Departamento&quot; ## [4] &quot;Provincia&quot; ## [5] &quot;Número municipio&quot; ## [6] &quot;Municipio&quot; ## [7] &quot;Circunscripción&quot; ## [8] &quot;Localidad&quot; ## [9] &quot;Recinto&quot; ## [10] &quot;Número Mesa&quot; ## [11] &quot;Código Mesa&quot; ## [12] &quot;Elección&quot; ## [13] &quot;Inscritos&quot; ## [14] &quot;CC&quot; ## [15] &quot;FPV&quot; ## [16] &quot;MTS&quot; ## [17] &quot;UCS&quot; ## [18] &quot;MAS - IPSP&quot; ## [19] &quot;21F&quot; ## [20] &quot;PDC&quot; ## [21] &quot;MNR&quot; ## [22] &quot;PAN-BOL&quot; ## [23] &quot;Votos Válidos&quot; ## [24] &quot;Blancos&quot; ## [25] &quot;Nulos&quot; ## [26] &quot;Estado acta&quot; bdtj&lt;-bdpv %&gt;% filter(Departamento==&quot;Tarija&quot;) %&gt;% select(Blancos,Nulos,`Votos Válidos`,Provincia,Municipio,Recinto) object.size(bdpv) ## 10601672 bytes object.size(bdtj) ## 113872 bytes #Para la encuesta a hogares 2019, se quiere estudiar los años de educación, condición de pobreza moderada, edad e ingreso laboral de las jefas de hogar. ateh&lt;-attributes(eh19p) ehjm&lt;-eh19p %&gt;% filter(s02a_02==aux[2] &amp; s02a_05==relacion[1]) %&gt;% select(aestudio,p0,s02a_03,ylab,folio,nro,factor,estrato, upm) #eh19p %&gt;% select(-folio) #eh19p %&gt;% select(-c(folio,area)) #eh19p %&gt;% select(1:5) # primeras 5 variables #eh19p %&gt;% select(z:pext2) 2.4.3 Pivot, Reshape 2.4.4 Uniendo bases de datos 2.5 Muestreo, estimación, error estándar y confiabilidad 2.5.1 Diseño muestral 2.5.2 Estimación 2.5.3 Rendimiento 2.6 Transformación 2.6.1 Adecuación de formatos 2.6.2 Limpieza de texto 2.6.3 Creación de variables 2.6.4 Valores atípicos 2.6.5 Valores perdidos "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
